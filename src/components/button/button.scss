@use "../../foundation/typography" as *;

// ==========================
// Base
// ==========================
button,
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-sizing: border-box;
  white-space: nowrap;
  border: none;
  gap: 4px;
  transition: transform 0.1s ease-in-out, background-color 0.3s ease,
    filter 0.3s ease;

  .icon {
    flex-shrink: 0;
  }

  &.focus-visible,
  &:focus-visible {
    outline: 2px solid var(--gray-700);
    outline-offset: 2px;
  }
}

// ==========================
// 공통 상태 Mixin
// ==========================

// hover/active 상태
@mixin interactive-states($hover-bg, $active-bg) {
  &:not(:disabled):not([aria-disabled="true"]) {
    cursor: pointer;

    &:hover {
      background-color: $hover-bg;
    }

    &:active {
      background-color: $active-bg;
      transform: scale(0.95);
    }
  }
}

// disabled / aria-disabled 상태
@mixin disabled-states($bg, $color, $icon-color, $border: null) {
  // 완전 비활성화
  &:disabled {
    background-color: $bg;
    color: $color;
    cursor: not-allowed;

    @if $border {
      border-color: $border;
      outline-color: $border;
    }

    .icon {
      color: $icon-color;
    }
  }

  // 시각적 비활성화 + 클릭 가능
  &[aria-disabled="true"] {
    background-color: $bg;
    color: $color;
    cursor: pointer;

    @if $border {
      border-color: $border;
      outline-color: $border;
    }

    .icon {
      color: $icon-color;
    }

    &:hover {
      filter: brightness(98%);
    }

    &:active {
      filter: brightness(95%);
      transform: scale(0.95);
    }
  }
}

// ==========================
// Solid Variant Mixin
// ==========================
@mixin btn-solid-styles($bg-color, $color, $icon-color) {
  background-color: $bg-color;
  color: $color;

  &:not(:disabled):not([aria-disabled="true"]) {
    cursor: pointer;

    .icon {
      color: $icon-color;
    }

    &:hover {
      filter: brightness(97%);
    }

    &:active {
      filter: brightness(95%);
      transform: scale(0.95);
    }
  }

  // disabled + aria-disabled
  @include disabled-states(var(--gray-100), var(--gray-500), var(--gray-400));
}

// ==========================
// Outlined Variant Mixin
// ==========================
@mixin btn-outlined-styles(
  $border-color,
  $bg-color,
  $color,
  $hover-bg-color,
  $active-bg-color,
  $icon-color
) {
  background-color: $bg-color;
  color: $color;
  border: 1px solid $border-color;

  .icon {
    color: $icon-color;
  }

  @include interactive-states($hover-bg-color, $active-bg-color);

  // disabled + aria-disabled
  @include disabled-states(
    var(--gray-50),
    var(--gray-400),
    var(--gray-400),
    var(--gray-200)
  );
}

// ==========================
// Ghost Variant Mixin
// ==========================
@mixin btn-ghost-styles(
  $bg-color,
  $color,
  $hover-bg-color,
  $active-bg-color,
  $icon-color
) {
  background-color: $bg-color;
  color: $color;
  border: none;

  &:not(:disabled):not([aria-disabled="true"]) {
    cursor: pointer;

    .icon {
      color: $icon-color;
    }

    &:hover {
      background-color: $hover-bg-color;
    }

    &:active {
      background-color: $active-bg-color;
      transform: scale(0.95);
    }
  }

  // disabled + aria-disabled
  @include disabled-states(transparent, var(--gray-400), var(--gray-400));
}

// ==========================
// Variants
// ==========================

// Solid
.btn--solid.btn--primary {
  @include btn-solid-styles(var(--brand-500), var(--white), var(--white));
}
.btn--solid.btn--secondary {
  @include btn-solid-styles(
    var(--brand-150),
    var(--brand-500),
    var(--brand-500)
  );
}
.btn--solid.btn--neutral {
  @include btn-solid-styles(var(--gray-200), var(--gray-900), var(--gray-900));
}

// Outlined
.btn--outlined.btn--primary {
  @include btn-outlined-styles(
    var(--brand-500),
    var(--white),
    var(--brand-500),
    var(--brand-100),
    var(--brand-150),
    var(--brand-500)
  );
}
.btn--outlined.btn--secondary {
  @include btn-outlined-styles(
    var(--gray-250),
    var(--white),
    var(--brand-500),
    var(--gray-100),
    var(--gray-150),
    var(--brand-500)
  );
}
.btn--outlined.btn--neutral {
  @include btn-outlined-styles(
    var(--gray-250),
    var(--white),
    var(--gray-900),
    var(--gray-100),
    var(--gray-150),
    var(--gray-900)
  );
}

// Ghost
.btn--ghost.btn--primary {
  @include btn-ghost-styles(
    transparent,
    var(--brand-500),
    var(--brand-50),
    var(--brand-100),
    var(--brand-500)
  );
}
.btn--ghost.btn--neutral {
  @include btn-ghost-styles(
    transparent,
    var(--gray-900),
    var(--gray-100),
    var(--gray-200),
    var(--gray-900)
  );
}

// ==========================
// Size Mixin
// ==========================
@mixin button-size($padding, $radius, $gap, $typography, $icon-size) {
  @include typography($typography, semibold);
  padding: $padding;
  border-radius: $radius;
  gap: $gap;

  .icon {
    width: $icon-size;
    height: $icon-size;
  }
}

// ==========================
// Sizes
// ==========================
.btn--large {
  @include button-size(10px 20px, 12px, 4px, body1, 17px);

  &.btn--ghost {
    @include typography(body1, medium);
    padding: 5px 8px;
  }
}

.btn--medium {
  @include button-size(7px 16px, 10px, 3px, body2, 15px);

  &.btn--ghost {
    @include typography(body2, medium);
    padding: 4px 7px;
  }
}

.btn--small {
  @include button-size(5px 11px, 8px, 3px, label1, 13px);

  &.btn--ghost {
    @include typography(label1, medium);
    padding: 3px 6px;
  }
}

// Outlined는 커보여서 solid보다 1px 줄임
// .btn--outlined.btn--large {
//   padding: 9px 19px;
// }
// .btn--outlined.btn--medium {
//   padding: 6px 15px;
// }
// .btn--outlined.btn--small {
//   padding: 4px 10px;
// }

// ==========================
// icon-only
// ==========================
.btn--icon-only {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 35%;
  padding: 0.5rem; // small 기준

  .icon {
    margin: 0;
    width: 1em;
    height: 1em;
  }

  &.btn--large {
    padding: 0.75rem; // 12px
    .icon {
      width: 1.5rem; // 24px
      height: 1.5rem;
    }
  }

  &.btn--medium {
    padding: 0.625rem; // 10px
    .icon {
      width: 1.25rem; // 20px
      height: 1.25rem;
    }
  }

  &.btn--small {
    padding: 0.5rem; // 8px
    .icon {
      width: 1rem; // 16px
      height: 1rem;
    }
  }

  &.btn--custom {
    padding: 0.375rem; // 6px
    .icon {
      width: 0.875rem; // 14px
      height: 0.875rem;
    }
  }
}

// ==========================
// btn--icon-utility
// ==========================
.btn--icon-utility {
  border-style: none;
  background-color: transparent;
  transition: transform 0.1s ease-in-out, background-color 0.3s ease,
    filter 0.3s ease;
  padding: 0.375rem;
  border-radius: 42%;

  &:not(:disabled):not([aria-disabled="true"]) {
    cursor: pointer;

    .icon {
      color: var(--gray-700);
    }

    &:hover {
      background-color: var(--gray-150);
    }

    &:active {
      background-color: var(--gray-250);
      transform: scale(0.95);
    }
  }

  &:disabled {
    cursor: not-allowed;

    .icon {
      color: var(--gray-400);
    }
  }

  &[aria-disabled="true"] {
    cursor: pointer;

    .icon {
      color: var(--gray-400);
    }

    &:hover {
      background-color: var(--gray-100);
    }

    &:active {
      background-color: var(--gray-150);
      transform: scale(0.95);
    }
  }
}
